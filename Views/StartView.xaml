<UserControl x:Class="RiskierWas.Views.StartView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:sys="clr-namespace:System;assembly=System.Runtime"
             mc:Ignorable="d">

    <Grid Background="#0D0D0D">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Header -->
            <RowDefinition Height="*"/>
            <!-- Inhalt -->
        </Grid.RowDefinitions>

        <!-- HEADER: Logo + Erklärung -->
        <Border Grid.Row="0" Background="#1F2937" Padding="16" CornerRadius="12" Margin="8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="24"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Logo -->
                <Image Source="/Assets/logo.png"
                       Height="150"
                       HorizontalAlignment="Left"
                       Stretch="Uniform"
                       SnapsToDevicePixels="True"
                       RenderOptions.BitmapScalingMode="HighQuality"/>

                <!-- Abstand -->
                <Rectangle Grid.Column="1" Width="24" Fill="Transparent"/>

                <!-- Erklärung rechts -->
                <ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="So funktioniert eine Runde"
                                   Foreground="White" FontSize="20" FontWeight="Bold" Margin="0,0,0,8"/>
                        <TextBlock Foreground="White" TextWrapping="Wrap" Margin="0,0,0,4">
                            <Run Text="Das "/><Bold>aktive Team</Bold><Run Text=" deckt nacheinander Antworten auf."/>
                        </TextBlock>
                        <TextBlock Foreground="White" TextWrapping="Wrap" Margin="0,0,0,4">
                            <Run Text="Punktewert: "/><Bold>50, 100, 150, …</Bold><Run Text=" (steigt pro richtiger Antwort um +50)."/>
                        </TextBlock>
                        <TextBlock Foreground="White" TextWrapping="Wrap" Margin="0,0,0,4">
                            <Bold>Falsche Antwort:</Bold><Run Text=" Alle "/><Bold>Punkte der aktuellen Runde</Bold>
                            <Run Text=" verfallen, der Zug wechselt. Der Punktewert bleibt unverändert."/>
                        </TextBlock>
                        <TextBlock Foreground="White" TextWrapping="Wrap" Margin="0,0,0,4">
                            <Bold>Weitergeben:</Bold><Run Text=" Rundenpunkte werden dem Konto gutgeschrieben (ohne Risiko), Zug wechselt."/>
                        </TextBlock>
                        <TextBlock Foreground="White" TextWrapping="Wrap" Margin="0,0,0,4">
                            <Bold>Auto-Aufdecken:</Bold><Run Text=" Wenn alle richtigen oder alle falschen Antworten offen sind."/>
                        </TextBlock>
                        <TextBlock Foreground="White" TextWrapping="Wrap" Margin="0,6,0,0">
                            <Run Text="Anzeige im Spiel: "/><Bold>Punkte aktuelle Runde</Bold><Run Text=" (Risiko) &amp; "/>
                            <Bold>Nächste richtige Antwort</Bold><Run Text=" (aktueller Punktewert)."/>
                        </TextBlock>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Border>

        <!-- INHALT: Teams links / Fragen & Editor rechts -->
        <Grid Grid.Row="1" Margin="8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="420"/>
                <!-- Teams -->
                <ColumnDefinition Width="24"/>
                <ColumnDefinition Width="*"/>
                <!-- Fragen & Editor -->
            </Grid.ColumnDefinitions>

            <!-- TEAMS (links) -->
            <StackPanel Grid.Column="0" Margin="0,8,0,8">
                <TextBlock Text="Teams" FontSize="20" Foreground="White" Margin="0,0,0,8"/>
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,8">
                    <TextBlock Text="Anzahl:" Foreground="White" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <ComboBox Width="80" SelectedItem="{Binding TeamCount, Mode=TwoWay}">
                        <sys:Int32>2</sys:Int32>
                        <sys:Int32>3</sys:Int32>
                        <sys:Int32>4</sys:Int32>
                    </ComboBox>
                </StackPanel>

                <ItemsControl ItemsSource="{Binding Teams}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <TextBlock Text="Name:" Foreground="White" Width="60"/>
                                <TextBox Text="{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <StackPanel Orientation="Horizontal" Margin="0,16,0,0">
                    <Button Content="Spiel starten" Command="{Binding StartGameCommand}" Padding="12,8" Margin="0,0,8,0"/>
                </StackPanel>
            </StackPanel>

            <!-- FRAGEN & EDITOR (rechts) -->
            <StackPanel Grid.Column="2" Margin="0,8,0,8" VerticalAlignment="Top">
                <TextBlock Text="Fragen" FontSize="20" Foreground="White" Margin="0,0,0,8"/>
                <TextBlock Text="{Binding LoadStatus}" Foreground="LightGreen" Margin="0,0,0,8"/>
                <Button Content="Fragen laden…" Command="{Binding LoadQuestionsCommand}" Padding="12,8" Width="220" Margin="0,0,0,8"/>

                <!-- Editor öffnen -->
                <Button Content="Frageneditor öffnen"
                        Command="{Binding OpenEditorCommand}"
                        Padding="12,8" Width="220" Margin="0,8,0,0"/>

                <TextBlock Text="(Standard: Data/questions.json neben der EXE)"
                           Foreground="Gray" Margin="0,8,0,0"/>

                <!-- Anleitung zum Editor -->
                <Border Margin="0,24,0,0" Background="#111827" CornerRadius="12" Padding="12">
                    <StackPanel>
                        <TextBlock Text="Frageneditor – Kurzinfo"
                                   Foreground="White" FontSize="18" FontWeight="Bold" Margin="0,0,0,8"/>
                        <TextBlock Foreground="White" TextWrapping="Wrap" Margin="0,0,0,4"
                                   Text="Mit dem Häkchen wählst du Fragen aus, die im nächsten Spiel verwendet werden."/>
                        <TextBlock Foreground="White" TextWrapping="Wrap" Margin="0,0,0,4"
                                   Text="„Alle abwählen“ setzt alle Häkchen aus; „20 zufällige Fragen“ setzt Häkchen bei 20 zufälligen."/>
                        <TextBlock Foreground="White" TextWrapping="Wrap" Margin="0,0,0,4"
                                   Text="„Neue Frage“ / „Frage löschen“: Fragenbestand anpassen; Antworten rechts bearbeiten (max. 16)."/>
                        <TextBlock Foreground="White" TextWrapping="Wrap"
                                   Text="„Speichern“ schreibt nach Data/questions.json; „Speichern unter…“ exportiert die aktuelle Liste."/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
